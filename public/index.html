<!DOCTYPE html>
<html lang="es">
<head>
ย ย <meta charset="UTF-8">
ย ย <meta name="viewport" content="width=device-width, initial-scale=1.0">
ย ย <title>Hoja de Cรกlculo con Conversiรณn de Monedas</title>
ย ย <style>
ย ย ย ย body {
ย ย ย ย ย ย font-family: Arial, sans-serif;
ย ย ย ย ย ย margin: 10px;
ย ย ย ย ย ย background-color: #f5f5f5;
ย ย ย ย ย ย padding: 0;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .container {
ย ย ย ย ย ย max-width: 1200px;
ย ย ย ย ย ย margin: 0 auto;
ย ย ย ย ย ย background-color: white;
ย ย ย ย ย ย padding: 15px;
ย ย ย ย ย ย border-radius: 8px;
ย ย ย ย ย ย box-shadow: 0 2px 10px rgba(0,0,0,0.1);
ย ย ย ย }
ย ย ย ยย
ย ย ย ย /* Responsive Design */
ย ย ย ย @media (max-width: 768px) {
ย ย ย ย ย ย body {
ย ย ย ย ย ย ย ย margin: 5px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย .container {
ย ย ย ย ย ย ย ย padding: 10px;
ย ย ย ย ย ย ย ย border-radius: 4px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย h1 {
ย ย ย ย ย ย ย ย font-size: 20px;
ย ย ย ย ย ย ย ย margin-bottom: 15px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย .exchange-rates {
ย ย ย ย ย ย ย ย padding: 10px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย .rates-grid {
ย ย ย ย ย ย ย ย grid-template-columns: 1fr;
ย ย ย ย ย ย ย ย gap: 8px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย .rate-item {
ย ย ย ย ย ย ย ย padding: 6px 8px;
ย ย ย ย ย ย ย ย font-size: 14px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย .rate-input {
ย ย ย ย ย ย ย ย width: 80px;
ย ย ย ย ย ย ย ย font-size: 14px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย /* Tabla horizontal scrollable en mรณviles */
ย ย ย ย ย ย .table-container {
ย ย ย ย ย ย ย ย overflow-x: auto;
ย ย ย ย ย ย ย ย -webkit-overflow-scrolling: touch;
ย ย ย ย ย ย ย ย margin: 10px -10px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย table {
ย ย ย ย ย ย ย ย min-width: 800px;
ย ย ย ย ย ย ย ย font-size: 14px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย th, td {
ย ย ย ย ย ย ย ย padding: 8px 6px;
ย ย ย ย ย ย ย ย min-width: 100px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย th:first-child, td:first-child {
ย ย ย ย ย ย ย ย min-width: 120px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย input[type="text"], input[type="number"], select {
ย ย ย ย ย ย ย ย padding: 6px;
ย ย ย ย ย ย ย ย font-size: 14px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย .currency-cell input {
ย ย ย ย ย ย ย ย padding-left: 20px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย .delete-btn {
ย ย ย ย ย ย ย ย padding: 4px 8px;
ย ย ย ย ย ย ย ย font-size: 11px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย .add-row-btn, .export-btn, .save-btn, .load-btn {
ย ย ย ย ย ย ย ย padding: 12px 16px;
ย ย ย ย ย ย ย ย font-size: 14px;
ย ย ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย ย ย margin: 10px 0 5px 0;
ย ย ย ย ย ย }
ย ย ย ย }
ย ย ย ยย
ย ย ย ย @media (max-width: 480px) {
ย ย ย ย ย ย h1 {
ย ย ย ย ย ย ย ย font-size: 18px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย .exchange-rates h3 {
ย ย ย ย ย ย ย ย font-size: 16px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย table {
ย ย ย ย ย ย ย ย font-size: 12px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย th, td {
ย ย ย ย ย ย ย ย padding: 6px 4px;
ย ย ย ย ย ย ย ย min-width: 90px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย input[type="text"], input[type="number"], select {
ย ย ย ย ย ย ย ย padding: 5px;
ย ย ย ย ย ย ย ย font-size: 12px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย .currency-symbol {
ย ย ย ย ย ย ย ย font-size: 12px;
ย ย ย ย ย ย ย ย left: 6px;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย .currency-cell input {
ย ย ย ย ย ย ย ย padding-left: 18px;
ย ย ย ย ย ย }
ย ย ย ย }
ย ย ย ยย
ย ย ย ย h1 {
ย ย ย ย ย ย color: #333;
ย ย ย ย ย ย text-align: center;
ย ย ย ย ย ย margin-bottom: 30px;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .exchange-rates {
ย ย ย ย ย ย background-color: #e3f2fd;
ย ย ย ย ย ย padding: 15px;
ย ย ย ย ย ย border-radius: 5px;
ย ย ย ย ย ย margin-bottom: 20px;
ย ย ย ย ย ย border-left: 4px solid #2196f3;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .exchange-rates h3 {
ย ย ย ย ย ย margin-top: 0;
ย ย ย ย ย ย color: #1976d2;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .rates-grid {
ย ย ย ย ย ย display: grid;
ย ย ย ย ย ย grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
ย ย ย ย ย ย gap: 10px;
ย ย ย ย ย ย margin-top: 10px;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .rate-item {
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย justify-content: space-between;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย background-color: white;
ย ย ย ย ย ย padding: 8px 12px;
ย ย ย ย ย ย border-radius: 4px;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .rate-input {
ย ย ย ย ย ย width: 100px;
ย ย ย ย ย ย padding: 4px 8px;
ย ย ย ย ย ย border: 1px solid #ddd;
ย ย ย ย ย ย border-radius: 3px;
ย ย ย ย ย ย text-align: right;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย /* Controles de bรบsqueda y ordenaciรณn */
ย ย ย ย .controls {
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย justify-content: space-between;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย flex-wrap: wrap;
ย ย ย ย ย ย gap: 10px;
ย ย ย ย ย ย margin-bottom: 20px;
ย ย ย ย }

ย ย ย ย .search-container {
ย ย ย ย ย ย flex-grow: 1;
ย ย ย ย ย ย min-width: 200px;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .search-container input {
ย ย ย ย ย ย width: 100%;
ย ย ย ย }

ย ย ย ย .sort-options {
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย gap: 10px;
ย ย ย ย }

ย ย ย ย .sort-btn {
ย ย ย ย ย ย background-color: #2196f3;
ย ย ย ย ย ย color: white;
ย ย ย ย ย ย border: none;
ย ย ย ย ย ย padding: 8px 12px;
ย ย ย ย ย ย border-radius: 4px;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย font-size: 14px;
ย ย ย ย ย ย white-space: nowrap;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .sort-btn:hover {
ย ย ย ย ย ย background-color: #0b7dda;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย table {
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย border-collapse: collapse;
ย ย ย ย ย ย margin-top: 20px;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย th {
ย ย ย ย ย ย background-color: #4caf50;
ย ย ย ย ย ย color: white;
ย ย ย ย ย ย padding: 12px;
ย ย ย ย ย ย text-align: left;
ย ย ย ย ย ย font-weight: bold;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย position: relative;
ย ย ย ย }

ย ย ย ย .sort-icon {
ย ย ย ย ย ย margin-left: 5px;
ย ย ย ย ย ย font-size: 10px;
ย ย ย ย ย ย position: absolute;
ย ย ย ย ย ย right: 10px;
ย ย ย ย ย ย top: 50%;
ย ย ย ย ย ย transform: translateY(-50%);
ย ย ย ย }
ย ย ย ยย
ย ย ย ย th.asc .sort-icon::after {
ย ย ย ย ย ย content: 'โฒ';
ย ย ย ย }

ย ย ย ย th.desc .sort-icon::after {
ย ย ย ย ย ย content: 'โผ';
ย ย ย ย }
ย ย ย ยย
ย ย ย ย td {
ย ย ย ย ย ย padding: 10px;
ย ย ย ย ย ย border-bottom: 1px solid #ddd;
ย ย ย ย ย ย vertical-align: middle;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย tr:nth-child(even) {
ย ย ย ย ย ย background-color: #f9f9f9;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย tr:hover {
ย ย ย ย ย ย background-color: #f5f5f5;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย input[type="text"], input[type="number"], select {
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย padding: 8px;
ย ย ย ย ย ย border: 1px solid #ddd;
ย ย ย ย ย ย border-radius: 4px;
ย ย ย ย ย ย box-sizing: border-box;
ย ย ย ย ย ย font-size: 14px;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย input[type="number"] {
ย ย ย ย ย ย text-align: right;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .currency-cell {
ย ย ย ย ย ย position: relative;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .currency-symbol {
ย ย ย ย ย ย position: absolute;
ย ย ย ย ย ย left: 8px;
ย ย ย ย ย ย top: 50%;
ย ย ย ย ย ย transform: translateY(-50%);
ย ย ย ย ย ย color: #666;
ย ย ย ย ย ย pointer-events: none;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .currency-cell input {
ย ย ย ย ย ย padding-left: 25px;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย select {
ย ย ย ย ย ย background-color: white;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .btn-group {
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย flex-wrap: wrap;
ย ย ย ย ย ย gap: 10px;
ย ย ย ย ย ย margin-top: 20px;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .add-row-btn, .export-btn, .save-btn, .load-btn {
ย ย ย ย ย ย background-color: #4caf50;
ย ย ย ย ย ย color: white;
ย ย ย ย ย ย padding: 10px 20px;
ย ย ย ย ย ย border: none;
ย ย ย ย ย ย border-radius: 4px;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย font-size: 16px;
ย ย ย ย ย ย flex: 1;
ย ย ย ย ย ย min-width: 150px;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .export-btn {
ย ย ย ย ย ย background-color: #2196f3;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .save-btn {
ย ย ย ย ย ย background-color: #ff9800;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .load-btn {
ย ย ย ย ย ย background-color: #9c27b0;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .add-row-btn:hover {
ย ย ย ย ย ย background-color: #45a049;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .export-btn:hover {
ย ย ย ย ย ย background-color: #0b7dda;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .save-btn:hover {
ย ย ย ย ย ย background-color: #f57c00;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .load-btn:hover {
ย ย ย ย ย ย background-color: #7b1fa2;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .delete-btn {
ย ย ย ย ย ย background-color: #f44336;
ย ย ย ย ย ย color: white;
ย ย ย ย ย ย border: none;
ย ย ย ย ย ย padding: 5px 10px;
ย ย ย ย ย ย border-radius: 3px;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย font-size: 12px;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .delete-btn:hover {
ย ย ย ย ย ย background-color: #da190b;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย /* Spinner */
ย ย ย ย .spinner-overlay {
ย ย ย ย ย ย position: fixed;
ย ย ย ย ย ย top: 0;
ย ย ย ย ย ย left: 0;
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย height: 100%;
ย ย ย ย ย ย background-color: rgba(255, 255, 255, 0.7);
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย justify-content: center;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย z-index: 1000;
ย ย ย ย ย ย opacity: 0;
ย ย ย ย ย ย visibility: hidden;
ย ย ย ย ย ย transition: opacity 0.3s ease, visibility 0s linear 0.3s;
ย ย ย ย }

ย ย ย ย .spinner-overlay.show {
ย ย ย ย ย ย opacity: 1;
ย ย ย ย ย ย visibility: visible;
ย ย ย ย ย ย transition: opacity 0.3s ease;
ย ย ย ย }

ย ย ย ย .spinner {
ย ย ย ย ย ย width: 50px;
ย ย ย ย ย ย height: 50px;
ย ย ย ย ย ย border: 5px solid #f3f3f3;
ย ย ย ย ย ย border-top: 5px solid #3498db;
ย ย ย ย ย ย border-radius: 50%;
ย ย ย ย ย ย animation: spin 1s linear infinite;
ย ย ย ย }

ย ย ย ย @keyframes spin {
ย ย ย ย ย ย 0% { transform: rotate(0deg); }
ย ย ย ย ย ย 100% { transform: rotate(360deg); }
ย ย ย ย }

ย ย ย ย /* Mensajes de estado */
ย ย ย ย .status-message {
ย ย ย ย ย ย padding: 10px;
ย ย ย ย ย ย margin: 10px 0;
ย ย ย ย ย ย border-radius: 4px;
ย ย ย ย ย ย text-align: center;
ย ย ย ย ย ย font-weight: bold;
ย ย ย ย ย ย opacity: 0;
ย ย ย ย ย ย transform: translateY(-20px);
ย ย ย ย ย ย transition: opacity 0.4s ease, transform 0.4s ease;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .status-message.show {
ย ย ย ย ย ย opacity: 1;
ย ย ย ย ย ย transform: translateY(0);
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .status-message.hidden {
ย ย ย ย ย ย opacity: 0;
ย ย ย ย ย ย transform: translateY(-20px);
ย ย ย ย ย ย transition: opacity 0.4s ease, transform 0.4s ease 0.5s;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .status-success {
ย ย ย ย ย ย background-color: #d4edda;
ย ย ย ย ย ย color: #155724;
ย ย ย ย ย ย border: 1px solid #c3e6cb;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .status-error {
ย ย ย ย ย ย background-color: #f8d7da;
ย ย ย ย ย ย color: #721c24;
ย ย ย ย ย ย border: 1px solid #f5c6cb;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .status-info {
ย ย ย ย ย ย background-color: #d1ecf1;
ย ย ย ย ย ย color: #0c5460;
ย ย ย ย ย ย border: 1px solid #bee5eb;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย /* Celda del link */
ย ย ย ย .link-cell {
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย gap: 5px;
ย ย ย ย }
ย ย ย ย .link-cell input {
ย ย ย ย ย ย flex-grow: 1;
ย ย ย ย }
ย ย ย ย .open-link-btn {
ย ย ย ย ย ย background-color: #17a2b8;
ย ย ย ย ย ย color: white;
ย ย ย ย ย ย padding: 8px 12px;
ย ย ย ย ย ย border: none;
ย ย ย ย ย ย border-radius: 4px;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย font-size: 12px;
ย ย ย ย ย ย flex-shrink: 0;
ย ย ย ย ย ย white-space: nowrap;
ย ย ย ย }
ย ย ย ย .open-link-btn:hover {
ย ย ย ย ย ย background-color: #138496;
ย ย ย ย }
ย ย ย ย .open-link-btn:disabled {
ย ย ย ย ย ย background-color: #cccccc;
ย ย ย ย ย ย cursor: not-allowed;
ย ย ย ย ย ย opacity: 0.7;
ย ย ย ย }

ย ย ย ย /* --- NUEVOS ESTILOS PARA EDICIรN DE FILA --- */
ย ย ย ย .edit-btn, .save-row-btn {
ย ย ย ย ย ย background-color: #17a2b8;
ย ย ย ย ย ย color: white;
ย ย ย ย ย ย border: none;
ย ย ย ย ย ย padding: 5px 10px;
ย ย ย ย ย ย border-radius: 3px;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย font-size: 12px;
ย ย ย ย ย ย margin-right: 5px;
ย ย ย ย }

ย ย ย ย .edit-btn:hover, .save-row-btn:hover {
ย ย ย ย ย ย background-color: #138496;
ย ย ย ย }

ย ย ย ย .save-row-btn {
ย ย ย ย ย ย background-color: #28a745;
ย ย ย ย }

ย ย ย ย .save-row-btn:hover {
ย ย ย ย ย ย background-color: #218838;
ย ย ย ย }

ย ย ย ย /* Estilo para resaltar la fila en modo de ediciรณn */
ย ย ย ย tr.editing-row {
ย ย ย ย ย ย background-color: #fffbe6 !important;
ย ย ย ย }

ย ย ย ย /* Hacer que los inputs se vean bloqueados cuando estรกn en readonly */
ย ย ย ย input:read-only, select:disabled {
ย ย ย ย ย ย background-color: #f8f9fa;
ย ย ย ย ย ย cursor: not-allowed;
ย ย ย ย ย ย border-color: #e9ecef;
ย ย ย ย ย ย color: #6c757d;
ย ย ย ย }
ย ย </style>
</head>
<body>
ย ย <div class="container">
ย ย ย ย <h1>๐ Hoja de Cรกlculo con Conversiรณn de Monedas</h1>
ย ย ย ยย
ย ย ย ย <div id="statusMessage" class="status-message"></div>
ย ย ย ยย
ย ย ย ย <div class="exchange-rates">
ย ย ย ย ย ย <h3>๐ฑ Tipos de Cambio</h3>
ย ย ย ย ย ย <div class="rates-grid">
ย ย ย ย ย ย ย ย <div class="rate-item">
ย ย ย ย ย ย ย ย ย ย <span>1 USD =</span>
ย ย ย ย ย ย ย ย ย ย <input type="number" id="usd-to-ars" class="rate-input" value="1330" step="0.01">
ย ย ย ย ย ย ย ย ย ย <span>ARS</span>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย <div class="rate-item">
ย ย ย ย ย ย ย ย ย ย <span>1 USD =</span>
ย ย ย ย ย ย ย ย ย ย <input type="number" id="usd-to-clp" class="rate-input" value="955" step="0.01">
ย ย ย ย ย ย ย ย ย ย <span>CLP</span>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย </div>
ย ย ย ย </div>

ย ย ย ย <div class="controls">
ย ย ย ย ย ย <div class="search-container">
ย ย ย ย ย ย ย ย <input type="text" id="searchInput" placeholder="Buscar producto...">
ย ย ย ย ย ย </div>
ย ย ย ย ย ย <div class="sort-options">
ย ย ย ย ย ย ย ย <button id="sortAscBtn" class="sort-btn">Precios: Menor a Mayor</button>
ย ย ย ย ย ย ย ย <button id="sortDescBtn" class="sort-btn">Precios: Mayor a Menor</button>
ย ย ย ย ย ย </div>
ย ย ย ย </div>
ย ย ย ยย
ย ย ย ย <div class="table-container">
ย ย ย ย ย ย <table id="productTable">
ย ย ย ย ย ย ย ย <thead>
ย ย ย ย ย ย ย ย ย ย <tr>
ย ย ย ย ย ย ย ย ย ย ย ย <th data-column="nombre">Producto <span class="sort-icon"></span></th>
ย ย ย ย ย ย ย ย ย ย ย ย <th>Estado</th>
ย ย ย ย ย ย ย ย ย ย ย ย <th>Link</th>
ย ย ย ย ย ย ย ย ย ย ย ย <th data-column="precio_usd">Precio USD ($) <span class="sort-icon"></span></th>
ย ย ย ย ย ย ย ย ย ย ย ย <th data-column="precio_ars">Precio ARS ($) <span class="sort-icon"></span></th>
ย ย ย ย ย ย ย ย ย ย ย ย <th data-column="precio_clp">Precio CLP ($) <span class="sort-icon"></span></th>
ย ย ย ย ย ย ย ย ย ย ย ย <th>Acciones</th>
ย ย ย ย ย ย ย ย ย ย </tr>
ย ย ย ย ย ย ย ย </thead>
ย ย ย ย ย ย ย ย <tbody id="tableBody">
ย ย ย ย ย ย ย ย </tbody>
ย ย ย ย ย ย </table>
ย ย ย ย </div>
ย ย ย ยย
ย ย ย ย <div class="btn-group">
ย ย ย ย ย ย <button class="add-row-btn" onclick="addRow()">โ Agregar Fila</button>
ย ย ย ย ย ย <button class="save-btn" onclick="saveAllData()">๐พ Guardar Todo</button>
ย ย ย ย ย ย <button class="load-btn" onclick="loadAllData()">๐ Cargar Datos</button>
ย ย ย ย ย ย <button class="export-btn" onclick="exportToCSV()">๐ฅ Exportar CSV</button>
ย ย ย ย </div>
ย ย </div>
ย ยย
ย ย <div id="loadingSpinner" class="spinner-overlay">
ย ย ย ย <div class="spinner"></div>
ย ย </div>

ย ย <script>
ย ย ย ย let isUpdating = false;
ย ย ย ย let productos = [];
ย ย ย ย let sortColumn = null;
ย ย ย ย let sortDirection = 'asc';
ย ย ย ย const API_BASE_URL = '/api';

ย ย ย ย document.addEventListener('DOMContentLoaded', () => {
ย ย ย ย ย ย loadAllData();

ย ย ย ย ย ย document.getElementById('searchInput').addEventListener('input', (e) => {
ย ย ย ย ย ย ย ย searchProducts(e.target.value);
ย ย ย ย ย ย });

ย ย ย ย ย ย document.querySelectorAll('th[data-column]').forEach(header => {
ย ย ย ย ย ย ย ย header.addEventListener('click', () => {
ย ย ย ย ย ย ย ย ย ย sortTable(header.getAttribute('data-column'));
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย });

ย ย ย ย ย ย document.getElementById('sortAscBtn').addEventListener('click', () => {
ย ย ย ย ย ย ย ย sortTable('precio_usd', 'asc');
ย ย ย ย ย ย });

ย ย ย ย ย ย document.getElementById('sortDescBtn').addEventListener('click', () => {
ย ย ย ย ย ย ย ย sortTable('precio_usd', 'desc');
ย ย ย ย ย ย });
ย ย ย ย });

ย ย ย ย function showMessage(message, type = 'info') {
ย ย ย ย ย ย const statusEl = document.getElementById('statusMessage');
ย ย ย ย ย ย statusEl.classList.remove('show', 'hidden', 'status-success', 'status-error', 'status-info');
ย ย ย ย ย ย statusEl.textContent = message;
ย ย ย ย ย ย statusEl.className = `status-message status-${type}`;
ย ย ย ย ย ย setTimeout(() => statusEl.classList.add('show'), 50);
ย ย ย ย ย ย setTimeout(() => statusEl.classList.add('hidden'), 4000);
ย ย ย ย }

ย ย ย ย function getRates() {
ย ย ย ย ย ย return {
ย ย ย ย ย ย ย ย usdToArs: parseFloat(document.getElementById('usd-to-ars').value) || 1330.92,
ย ย ย ย ย ย ย ย usdToClp: parseFloat(document.getElementById('usd-to-clp').value) || 955
ย ย ย ย ย ย };
ย ย ย ย }

ย ย ย ย function updateCurrencies(changedInput) {
ย ย ย ย ย ย if (isUpdating) return;
ย ย ย ย ย ย isUpdating = true;
ย ย ย ย ย ยย
ย ย ย ย ย ย const row = changedInput.closest('tr');
ย ย ย ย ย ย if (!row.classList.contains('editing-row')) {
ย ย ย ย ย ย ย ย isUpdating = false;
ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย }

ย ย ย ย ย ย const usdInput = row.querySelector('.usd-input');
ย ย ย ย ย ย const arsInput = row.querySelector('.ars-input');
ย ย ย ย ย ย const clpInput = row.querySelector('.clp-input');
ย ย ย ย ย ยย
ย ย ย ย ย ย const rates = getRates();
ย ย ย ย ย ย const inputValue = parseFloat(changedInput.value) || 0;
ย ย ย ย ย ยย
ย ย ย ย ย ย if (changedInput.value.trim() === '') {
ย ย ย ย ย ย ย ย isUpdating = false;
ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย }

ย ย ย ย ย ย if (inputValue >= 0) {
ย ย ย ย ย ย ย ย if (changedInput === usdInput) {
ย ย ย ย ย ย ย ย ย ย arsInput.value = (inputValue * rates.usdToArs).toFixed(2);
ย ย ย ย ย ย ย ย ย ย clpInput.value = (inputValue * rates.usdToClp).toFixed(2);
ย ย ย ย ย ย ย ย } else if (changedInput === arsInput) {
ย ย ย ย ย ย ย ย ย ย const calculatedUsd = inputValue / rates.usdToArs;
ย ย ย ย ย ย ย ย ย ย usdInput.value = calculatedUsd.toFixed(2);
ย ย ย ย ย ย ย ย ย ย clpInput.value = (calculatedUsd * rates.usdToClp).toFixed(2);
ย ย ย ย ย ย ย ย } else if (changedInput === clpInput) {
ย ย ย ย ย ย ย ย ย ย const calculatedUsd = inputValue / rates.usdToClp;
ย ย ย ย ย ย ย ย ย ย usdInput.value = calculatedUsd.toFixed(2);
ย ย ย ย ย ย ย ย ย ย arsInput.value = (calculatedUsd * rates.usdToArs).toFixed(2);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย }
ย ย ย ย ย ย isUpdating = false;
ย ย ย ย }

ย ย ย ย function createNewRow(producto = {}, isNew = false) {
ย ย ย ย ย ย const tableBody = document.getElementById('tableBody');
ย ย ย ย ย ย const newRow = document.createElement('tr');
ย ย ย ย ย ยย
ย ย ย ย ย ย newRow.innerHTML = `
ย ย ย ย ย ย ย ย <td><input type="text" placeholder="Nombre del producto" value="${producto.nombre || ''}" readonly></td>
ย ย ย ย ย ย ย ย <td>
ย ย ย ย ย ย ย ย ย ย <select disabled>
ย ย ย ย ย ย ย ย ย ย ย ย <option value="">Seleccionar</option>
ย ย ย ย ย ย ย ย ย ย ย ย <option value="nuevo" ${producto.estado === 'nuevo' ? 'selected' : ''}>Nuevo</option>
ย ย ย ย ย ย ย ย ย ย ย ย <option value="usado" ${producto.estado === 'usado' ? 'selected' : ''}>Usado</option>
ย ย ย ย ย ย ย ย ย ย </select>
ย ย ย ย ย ย ย ย </td>
ย ย ย ย ย ย ย ย <td class="link-cell">
ย ย ย ย ย ย ย ย ย ย <input type="text" class="link-input" placeholder="https://..." value="${producto.link || ''}" readonly>
ย ย ย ย ย ย ย ย ย ย <button class="open-link-btn">๐ Abrir</button>
ย ย ย ย ย ย ย ย </td>
ย ย ย ย ย ย ย ย <td class="currency-cell">
ย ย ย ย ย ย ย ย ย ย <span class="currency-symbol">$</span>
ย ย ย ย ย ย ย ย ย ย <input type="number" class="usd-input" step="0.01" placeholder="0.00" value="${producto.precio_usd || ''}" readonly>
ย ย ย ย ย ย ย ย </td>
ย ย ย ย ย ย ย ย <td class="currency-cell">
ย ย ย ย ย ย ย ย ย ย <span class="currency-symbol">$</span>
ย ย ย ย ย ย ย ย ย ย <input type="number" class="ars-input" step="0.01" placeholder="0.00" value="${producto.precio_ars || ''}" readonly>
ย ย ย ย ย ย ย ย </td>
ย ย ย ย ย ย ย ย <td class="currency-cell">
ย ย ย ย ย ย ย ย ย ย <span class="currency-symbol">$</span>
ย ย ย ย ย ย ย ย ย ย <input type="number" class="clp-input" step="0.01" placeholder="0.00" value="${producto.precio_clp || ''}" readonly>
ย ย ย ย ย ย ย ย </td>
ย ย ย ย ย ย ย ย <td>
ย ย ย ย ย ย ย ย ย ย <button class="edit-btn" onclick="editRow(this)">๐ Editar</button>
ย ย ย ย ย ย ย ย ย ย <button class="save-row-btn" onclick="saveRow(this)" style="display:none;">๐พ Guardar</button>
ย ย ย ย ย ย ย ย ย ย <button class="delete-btn" onclick="deleteRow(this)">๐๏ธ Eliminar</button>
ย ย ย ย ย ย ย ย </td>
ย ย ย ย ย ย `;
ย ย ย ย ย ยย
ย ย ย ย ย ย if (producto.id) {
ย ย ย ย ย ย ย ย newRow.setAttribute('data-id', producto.id);
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย tableBody.appendChild(newRow);
ย ย ย ย ย ย attachEventListeners(newRow);
ย ย ย ย ย ยย
ย ย ย ย ย ย if (isNew) {
ย ย ย ย ย ย ย ย editRow(newRow.querySelector('.edit-btn'));
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย return newRow;
ย ย ย ย }

ย ย ย ย function addRow() {
ย ย ย ย ย ย createNewRow({}, true);
ย ย ย ย }

ย ย ย ย function editRow(button) {
ย ย ย ย ย ย const row = button.closest('tr');
ย ย ย ย ย ย row.classList.add('editing-row');
ย ย ย ย ย ยย
ย ย ย ย ย ย row.querySelectorAll('input, select').forEach(el => {
ย ย ย ย ย ย ย ย el.readOnly = false;
ย ย ย ย ย ย ย ย el.disabled = false;
ย ย ย ย ย ย });

ย ย ย ย ย ย attachEventListeners(row);

ย ย ย ย ย ย row.querySelector('.edit-btn').style.display = 'none';
ย ย ย ย ย ย row.querySelector('.save-row-btn').style.display = 'inline-block';
ย ย ย ย ย ย row.querySelector('input[type="text"]').focus();
ย ย ย ย }

ย ย ย ย // *** FUNCIรN saveRow CORREGIDA ***
ย ย ย ย async function saveRow(button) {
ย ย ย ย ย ย const row = button.closest('tr');
ย ย ย ย ย ย const rowData = getRowData(row);
ย ย ย ย ย ยย
ย ย ย ย ย ย if (!rowData.nombre || rowData.nombre.trim() === '') {
ย ย ย ย ย ย ย ย showMessage('El nombre del producto no puede estar vacรญo.', 'error');
ย ย ย ย ย ย ย ย row.querySelector('input[type="text"]').focus();
ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย }

ย ย ย ย ย ย const spinnerEl = document.getElementById('loadingSpinner');
ย ย ย ย ย ย spinnerEl.classList.add('show');
ย ย ย ย ย ยย
ย ย ย ย ย ย try {
ย ย ย ย ย ย ย ย // Se obtiene el ID para saber si es una fila nueva o existente.
ย ย ย ย ย ย ย ย const productId = row.getAttribute('data-id');
ย ย ย ย ย ย ย ย let response;
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย if (productId) {
ย ย ย ย ย ย ย ย ย ย // Si hay un ID, se realiza una peticiรณn PUT para actualizar.
ย ย ย ย ย ย ย ย ย ย response = await fetch(`${API_BASE_URL}/productos/${productId}`, {
ย ย ย ย ย ย ย ย ย ย ย ย method: 'PUT',
ย ย ย ย ย ย ย ย ย ย ย ย headers: { 'Content-Type': 'application/json' },
ย ย ย ย ย ย ย ย ย ย ย ย body: JSON.stringify(rowData)
ย ย ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย ย ย // Si NO hay un ID, es un producto nuevo. Se realiza una peticiรณn POST.
ย ย ย ย ย ย ย ย ย ย response = await fetch(`${API_BASE_URL}/productos`, {
ย ย ย ย ย ย ย ย ย ย ย ย method: 'POST',
ย ย ย ย ย ย ย ย ย ย ย ย headers: { 'Content-Type': 'application/json' },
ย ย ย ย ย ย ย ย ย ย ย ย body: JSON.stringify(rowData)
ย ย ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย if (!response.ok) {
ย ย ย ย ย ย ย ย ย ย const errorData = await response.json();
ย ย ย ย ย ย ย ย ย ย throw new Error(errorData.message || 'Error al guardar el producto.');
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย const savedProduct = await response.json();
ย ย ย ย ย ย ย ย // Aquรญ se actualiza el ID en la fila, lo que permite que futuras ediciones
ย ย ย ย ย ย ย ย // de esta misma fila utilicen la peticiรณn PUT.
ย ย ย ย ย ย ย ย row.setAttribute('data-id', savedProduct.id);
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย row.classList.remove('editing-row');
ย ย ย ย ย ย ย ย row.querySelectorAll('input, select').forEach(el => {
ย ย ย ย ย ย ย ย ย ย if (el.tagName === 'SELECT') el.disabled = true;
ย ย ย ย ย ย ย ย ย ย else el.readOnly = true;
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย row.querySelector('.edit-btn').style.display = 'inline-block';
ย ย ย ย ย ย ย ย row.querySelector('.save-row-btn').style.display = 'none';

ย ย ย ย ย ย ย ย showMessage('Producto guardado exitosamente.', 'success');
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย } catch (error) {
ย ย ย ย ย ย ย ย console.error('Error:', error);
ย ย ย ย ย ย ย ย showMessage(error.message, 'error');
ย ย ย ย ย ย } finally {
ย ย ย ย ย ย ย ย spinnerEl.classList.remove('show');
ย ย ย ย ย ย }
ย ย ย ย }
ย ย ย ยย
ย ย ย ย function attachEventListeners(row) {
ย ย ย ย ย ย row.querySelectorAll('.usd-input, .ars-input, .clp-input').forEach(input => {
ย ย ย ย ย ย ย ย input.addEventListener('input', function() { updateCurrencies(this); });
ย ย ย ย ย ย });

ย ย ย ย ย ย const linkInput = row.querySelector('.link-input');
ย ย ย ย ย ย const openLinkBtn = row.querySelector('.open-link-btn');

ย ย ย ย ย ย const updateButtonState = () => {
ย ย ย ย ย ย ย ย openLinkBtn.disabled = !linkInput.value.trim();
ย ย ย ย ย ย };

ย ย ย ย ย ย linkInput.addEventListener('input', updateButtonState);
ย ย ย ย ย ยย
ย ย ย ย ย ย openLinkBtn.addEventListener('click', () => {
ย ย ย ย ย ย ย ย const url = linkInput.value.trim();
ย ย ย ย ย ย ย ย if (url) {
ย ย ย ย ย ย ย ย ย ย let fullUrl = url.startsWith('http') ? url : 'https://' + url;
ย ย ย ย ย ย ย ย ย ย window.open(fullUrl, '_blank');
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย });

ย ย ย ย ย ย updateButtonState();
ย ย ย ย }

ย ย ย ย function getRowData(row) {
ย ย ย ย ย ย const inputs = row.querySelectorAll('input, select');
ย ย ย ย ย ย return {
ย ย ย ย ย ย ย ย nombre: inputs[0].value || null,
ย ย ย ย ย ย ย ย estado: inputs[1].value || null,
ย ย ย ย ย ย ย ย link: inputs[2].value || null,
ย ย ย ย ย ย ย ย precio_usd: parseFloat(inputs[4].value) || null,
ย ย ย ย ย ย ย ย precio_ars: parseFloat(inputs[5].value) || null,
ย ย ย ย ย ย ย ย precio_clp: parseFloat(inputs[6].value) || null,
ย ย ย ย ย ย ย ย id: row.getAttribute('data-id') || null
ย ย ย ย ย ย };
ย ย ย ย }

ย ย ย ย async function saveAllData() {
ย ย ย ย ย ย if (!confirm('Esto intentarรก guardar TODAS las filas en modo de ediciรณn. ยฟDesea continuar?')) {
ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย }
ย ย ย ย ย ย const editingRows = document.querySelectorAll('#tableBody tr.editing-row');
ย ย ย ย ย ย if (editingRows.length === 0) {
ย ย ย ย ย ย ย ย showMessage('No hay filas en modo de ediciรณn para guardar.', 'info');
ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย }
ย ย ย ย ย ย for (let row of editingRows) {
ย ย ย ย ย ย ย ย await saveRow(row.querySelector('.save-row-btn'));
ย ย ย ย ย ย }
ย ย ย ย }
ย ย ย ยย
ย ย ย ย async function loadAllData() {
ย ย ย ย ย ย const spinnerEl = document.getElementById('loadingSpinner');
ย ย ย ย ย ย try {
ย ย ย ย ย ย ย ย spinnerEl.classList.add('show');
ย ย ย ย ย ย ย ย showMessage('Cargando productos...', 'info');
ย ย ย ย ย ย ย ย const response = await fetch(`${API_BASE_URL}/productos`);
ย ย ย ย ย ย ย ย if (!response.ok) throw new Error('Error al cargar productos');
ย ย ย ย ย ย ย ย productos = await response.json();
ย ย ย ย ย ย ย ย document.getElementById('tableBody').innerHTML = '';
ย ย ย ย ย ย ย ย if (productos.length > 0) {
ย ย ย ย ย ย ย ย ย ย productos.forEach(producto => createNewRow(producto));
ย ย ย ย ย ย ย ย ย ย showMessage(`${productos.length} productos cargados.`, 'success');
ย ย ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย ย ย addRow();
ย ย ย ย ย ย ย ย ย ย showMessage('No hay productos guardados. Se creรณ una fila nueva.', 'info');
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย } catch (error) {
ย ย ย ย ย ย ย ย console.error('Error:', error);
ย ย ย ย ย ย ย ย showMessage('Error al cargar productos.', 'error');
ย ย ย ย ย ย ย ย addRow();
ย ย ย ย ย ย } finally {
ย ย ย ย ย ย ย ย spinnerEl.classList.remove('show');
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย function deleteRow(button) {
ย ย ย ย ย ย const row = button.closest('tr');
ย ย ย ย ย ย const productId = row.getAttribute('data-id');
ย ย ย ย ย ย const productName = row.querySelector('input[type="text"]').value || "este producto";
ย ย ย ย ย ย const message = productId
ย ย ย ย ย ย ย ย ? `ยฟEstรกs seguro de que quieres eliminar "${productName}" de la base de datos?`
ย ย ย ย ย ย ย ย : `ยฟEstรกs seguro de que quieres descartar esta fila?`;
ย ย ย ย ย ย if (confirm(message)) {
ย ย ย ย ย ย ย ย if (productId) {
ย ย ย ย ย ย ย ย ย ย deleteProductFromDB(productId, row);
ย ย ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย ย ย row.remove();
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย }
ย ย ย ย }
ย ย ย ยย
ย ย ย ย async function deleteProductFromDB(productId, row) {
ย ย ย ย ย ย try {
ย ย ย ย ย ย ย ย const response = await fetch(`${API_BASE_URL}/productos/${productId}`, { method: 'DELETE' });
ย ย ย ย ย ย ย ย if (response.ok) {
ย ย ย ย ย ย ย ย ย ย row.remove();
ย ย ย ย ย ย ย ย ย ย showMessage('Producto eliminado exitosamente', 'success');
ย ย ย ย ย ย ย ย ย ย productos = productos.filter(p => p.id != productId);
ย ย ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย ย ย throw new Error('Error al eliminar producto');
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย } catch (error) {
ย ย ย ย ย ย ย ย console.error('Error:', error);
ย ย ย ย ย ย ย ย showMessage('Error al eliminar producto', 'error');
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย function exportToCSV() {
ย ย ย ย ย ย let csv = [['Producto', 'Estado', 'Link', 'Precio USD', 'Precio ARS', 'Precio CLP'].join(',')];
ย ย ย ย ย ย document.querySelectorAll('#tableBody tr').forEach(row => {
ย ย ย ย ย ย ย ย const data = getRowData(row);
ย ย ย ย ย ย ย ย if (data.nombre) {
ย ย ย ย ย ย ย ย ย ย const csvRow = [
ย ย ย ย ย ย ย ย ย ย ย ย `"${(data.nombre || '').replace(/"/g, '""')}"`,
ย ย ย ย ย ย ย ย ย ย ย ย `"${(data.estado || '').replace(/"/g, '""')}"`,
ย ย ย ย ย ย ย ย ย ย ย ย `"${(data.link || '').replace(/"/g, '""')}"`,
ย ย ย ย ย ย ย ย ย ย ย ย data.precio_usd || 0,
ย ย ย ย ย ย ย ย ย ย ย ย data.precio_ars || 0,
ย ย ย ย ย ย ย ย ย ย ย ย data.precio_clp || 0
ย ย ย ย ย ย ย ย ย ย ].join(',');
ย ย ย ย ย ย ย ย ย ย csv.push(csvRow);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย });
ย ย ย ย ย ย const csvContent = csv.join('\n');
ย ย ย ย ย ย const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
ย ย ย ย ย ย const link = document.createElement('a');
ย ย ย ย ย ย link.href = URL.createObjectURL(blob);
ย ย ย ย ย ย link.setAttribute('download', 'productos.csv');
ย ย ย ย ย ย document.body.appendChild(link);
ย ย ย ย ย ย link.click();
ย ย ย ย ย ย document.body.removeChild(link);
ย ย ย ย }

ย ย ย ย function searchProducts(searchTerm) {
ย ย ย ย ย ย const term = searchTerm.toLowerCase();
ย ย ย ย ย ย document.querySelectorAll('#tableBody tr').forEach(row => {
ย ย ย ย ย ย ย ย const productName = row.querySelector('input[type="text"]').value.toLowerCase();
ย ย ย ย ย ย ย ย row.style.display = productName.includes(term) ? '' : 'none';
ย ย ย ย ย ย });
ย ย ย ย }

ย ย ย ย function sortTable(column, direction = null) {
ย ย ย ย ย ย const tableBody = document.getElementById('tableBody');
ย ย ย ย ย ย const rows = Array.from(tableBody.querySelectorAll('tr'));
ย ย ย ย ย ยย
ย ย ย ย ย ย if (direction) {
ย ย ย ย ย ย ย ย sortDirection = direction;
ย ย ย ย ย ย } else if (sortColumn === column) {
ย ย ย ย ย ย ย ย sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย sortColumn = column;
ย ย ย ย ย ย ย ย sortDirection = 'asc';
ย ย ย ย ย ย }

ย ย ย ย ย ย document.querySelectorAll('th[data-column]').forEach(header => {
ย ย ย ย ย ย ย ย header.classList.remove('asc', 'desc');
ย ย ย ย ย ย ย ย if (header.getAttribute('data-column') === sortColumn) {
ย ย ย ย ย ย ย ย ย ย header.classList.add(sortDirection);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย });

ย ย ย ย ย ย rows.sort((a, b) => {
ย ย ย ย ย ย ย ย const rowAData = getRowData(a);
ย ย ย ย ย ย ย ย const rowBData = getRowData(b);
ย ย ย ย ย ย ย ย let aValue = rowAData[column] || (column === 'nombre' ? '' : 0);
ย ย ย ย ย ย ย ย let bValue = rowBData[column] || (column === 'nombre' ? '' : 0);

ย ย ย ย ย ย ย ย if (typeof aValue === 'string') {
ย ย ย ย ย ย ย ย ย ย aValue = aValue.toLowerCase();
ย ย ย ย ย ย ย ย ย ย bValue = bValue.toLowerCase();
ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย if (aValue < bValue) return sortDirection === 'asc' ? -1 : 1;
ย ย ย ย ย ย ย ย if (aValue > bValue) return sortDirection === 'asc' ? 1 : -1;
ย ย ย ย ย ย ย ย return 0;
ย ย ย ย ย ย });
ย ย ย ย ย ยย
ย ย ย ย ย ย rows.forEach(row => tableBody.appendChild(row));
ย ย ย ย }
ย ย </script>
</body>
</html>
